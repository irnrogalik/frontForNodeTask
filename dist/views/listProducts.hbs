<p><a href="/products/add">Add Product</a></p>

{{#if products}}
    <table class="table">
        <thead class="thead-light">
            <tr>
                <th>Name</th>
                <th>Price</th>
                <th>Category</th>
                <th></th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            {{#each products}}
                <tr>
                    <td>{{Name}}</td>
                    <td>{{Price}}</td>
                    <td>{{CategoryName}}</td>
                    <td>
                        <form class="addToCart" action="/products/addToCart/{{this.Id}}" method="POST">
                            <button type="submit">AddToCart</button>
                        </form>
                        <span class="inCart" style="display:none;">In <a href="/cart/">cart</a></span>
                    </td>
                    <td>
                        <form action="/products/delete/{{this.Id}}" method="POST">
                            <input type="submit" value="Delete"/>
                        </form>
                    </td>
                </tr>
            {{/each}}
        </tbody>
    </table>
{{/if}}

<script>
    $(".addToCart").on('submit', function (e) {
        e.preventDefault();
        const self = $(this);
        var form = self;
        var url = self.attr('action');
        $.ajax({
            type: "POST",
            url: url,
            success: function (data) {
                if (data == "Ok") {
                    self.hide();
                    self.next('.inCart').css("display", "block");
                }
            }
        });
    });
</script>